var Site=Site||{};Site.AboutAwardsDatabase=function($){{var view=$(this),path=view.data("path"),container=view.find(".results"),curtain=view.find(".curtain"),loading_more=view.find(".loading_more"),getSearchPath=function(page){return SITEPATH.substring(0,SITEPATH.length-1)+path+"?ajax=1&"+decodeURIComponent(view.find("SELECT[value!='']").serialize())+(page?"&page="+page:"")},doLoad=function(){return curtain.fadeIn(400),$.ajax(getSearchPath(),{type:"GET",dataType:"html",success:function(response){curtain.fadeOut(800),container.html(response).height("auto")}}),!1},doMore=function(){return loading_more.show(),$(this).closest(".more").remove(),$.ajax(getSearchPath($(this).data("page")),{type:"POST",dataType:"html",data:view.find("SELECT").serialize(),success:function(response){loading_more.hide(),container.find("#ajax_region").first().append($(response).find("#ajax_region").html())}}),!1};!function(){return path.length?(doLoad(),view.on("change","SELECT",doLoad),void view.on("click",'A[rel="Awards:LoadMore"]',doMore)):(c("AboutAwardsDatabase:: Missing path."),!1)}()}};var Site=Site||{};Site.AboutContactPage=function($){{var view=$(this),show_buttons=view.find('A[rel="AboutContactPage:scroll"]');!function(){view.find(".office").matchHeight(),show_buttons.click(function(){return $("HTML,BODY").animate({scrollTop:0}),!1})}()}};var Site=Site||{};Site.ContactForm=function($){{var view=$(this),show_buttons=view.find('A[rel="ContactForm:show"]'),show_dropdown=view.find("SELECT"),close_button=view.find('A[rel="ContactForm:close"]'),curtain=view.find(".curtain"),wrapper=view.find(".forms"),forms=wrapper.find(".form"),open=!1,hideForm=function(){return open=!1,curtain.fadeIn(700),show_buttons.removeClass("current"),wrapper.animate({height:0},1200,function(){forms.hide()}),!1},showClick=function(){return show_buttons.removeClass("current"),$(this).addClass("current"),showForm($(this).data("form")),!1},showDropdown=function(){return $(this).siblings("H4").html($(this).find("option:selected").text()),showForm($(this).val()),!1},showForm=function(name){var form=forms.filter('[data-form = "'+name+'"]'),height=(show_buttons.filter('[data-form = "'+name+'"]'),parseInt(form.attr("data-height")));view.find(".thankyou")&&view.find(".thankyou").fadeOut();var _show=function(){open=form,form.show(),wrapper.height(wrapper.height()),wrapper.stop(!0).animate({height:height+"px"},1200,function(){curtain.fadeOut(),wrapper.height("auto")})};return open==form?!1:(open?curtain.fadeIn(700,function(){forms.hide(),_show()}):_show(),!1)};!function(){show_buttons.click(showClick),show_dropdown.change(showDropdown),close_button.click(hideForm),Site.$Body.on("ContactForm:hide",hideForm)}()}};var Site=Site||{};Site.AboutGrid=function($){return};var Site=Site||{};Site.AboutHeroCarousel=function($){var view=$(this),slides=view.find(".item"),current=$(slides[0]),length=slides.length,position=1,timeout=6500;setInterval(function(){slides.not(current).css({zIndex:1,display:"none"}),current&&current.css({zIndex:1}),current=$(slides[position]),current.css({zIndex:2,display:"none"}).fadeIn(1100),position++,position>=length&&(position=0)},timeout)};var Site=Site||{};Site.AboutLeadershipPage=function($){{var view=$(this),container=view.find(".results"),curtain=view.find(".curtain"),loadComplete=function(response){curtain.fadeOut(800),container.html(response).height("auto"),container.find("[data-original]").lazyload({skip_invisible:!1,threshold:300,effect:"fadeIn"})},getSearchPath=function(){return SITEPATH.substring(0,SITEPATH.length-1)+CURRENT_URI+"?ajax=1"},doDropdownSearch=function(){_search(view.find("SELECT").serialize())},doLinkSearch=function(){var data={attribute:{}};return $(this).data("key")&&$(this).data("key").length&&(data.attribute[$(this).data("key")]=$(this).data("value")),_search(data),!1},_search=function(data){curtain.fadeIn(400);var minimum_time=1e3,start_time=new Date;$.ajax(getSearchPath(),{type:"POST",dataType:"html",data:data,success:function(response){var end_time=new Date,duration=end_time-start_time;minimum_time>duration?setTimeout(function(){loadComplete(response)},minimum_time-duration):loadComplete(response)}})};!function(){view.on("change","SELECT",doDropdownSearch),view.on("click",'A[rel="about:leadership:search"]',doLinkSearch)}()}};var Site=Site||{};Site.AboutRandomImage=function($){var view=$(this),randoms=view.find(".random"),random=Math.floor(Math.random()*randoms.length);randoms.not($(randoms[random])).remove(),$(randoms[random]).show()};var Site=Site||{};Site.Accordian=function($){var view=$(this),default_open=view.find('[data-accordian="default"]');view.find(".toggle").accordion({autoClose:"true",groupElement:".toggles",controlElement:".trigger",contentElement:".wrapper"}),default_open&&default_open.click()};var Site=Site||{};Site.BrandGrid=function($){$(this)};var Site=Site||{};Site.Breakpoints=new function(){var current,bp={mobile:640,tablet:940,desktop:1e3,desktop_xl:1200};this.isSafari=function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")},this.isTouch=function(){return!!("ontouchstart"in window)},this.detectSize=function(){var size=Site.$Window.width();return $.each(bp,function(key,value){return current=key,value>size?!1:void 0}),current},this.current=function(){return current},this.eq=function(check){return bp[check]==bp[current]},this.lte=function(check){return bp[current]<=bp[check]},this.gte=function(check){return bp[current]>=bp[check]},this.init=function(){Site.$Window.resize(Site.Breakpoints.detectSize).trigger("resize")}};var Site=Site||{};Site.IdeasCarousel=function($){{var view=$(this),carousel=view.find(".owl-carousel"),clickHelpers=(view.find(".curtain"),function(){view.find(".owl-nav > DIV, .owl-dot, .owl-dot SPAN").one("click",function(){stopAutoplay()})}),stopAutoplay=function(){carousel.trigger("stop.owl.autoplay")};carousel.owlCarousel({onInitialized:clickHelpers,onDragged:stopAutoplay,loop:!0,lazyLoad:!0,margin:5,dots:!1,nav:!0,navSpeed:1200,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:1200,items:1,navText:['<img src="/assets/img/arrow_prev.svg" />','<img src="/assets/img/arrow_next.svg" />'],responsive:{0:{stagePadding:0,margin:0,autoplay:!1},951:{stagePadding:100,items:1},1400:{stagePadding:150}}})}},Site.HeroCarousel=function($){{var view=$(this),curtain=view.find(".curtain"),carousel=view.find(".owl-carousel"),clickHelpers=function(){view.find(".owl-nav > DIV, .owl-dot, .owl-dot SPAN").one("click",function(){stopAutoplay()})},stopAutoplay=function(){carousel.trigger("stop.owl.autoplay")};carousel.owlCarousel({onInitialized:clickHelpers,onDragged:stopAutoplay,loop:!0,lazyLoad:!0,nav:!0,navSpeed:1200,dotsSpeed:1200,items:1,margin:6,autoplay:!0,autoplayTimeout:8500,autoplayHoverPause:!1,autoplaySpeed:1200,responsive:{0:{nav:!0,dots:!1,autoplay:!1},950:{},951:{dots:!0}},onLoadedLazy:function(){setTimeout(function(){curtain.addClass("loaded").fadeOut(1600)},300)},navText:['<img class="default" src="/assets/img/arrow_prev.svg" /><img class="thin" src="/assets/img/arrow_prev_thin.svg" />','<img class="default" src="/assets/img/arrow_next.svg" /><img class="thin" src="/assets/img/arrow_next_thin.svg" />']})}},Site.SlideshowGalleryCarousel=function($){var view=$(this),carousel=view.find(".owl-carousel"),details=view.find(".details .item"),detail_prev=details.find(".owl-prev"),detail_next=details.find(".owl-next"),Slideshow=carousel.owlCarousel({loop:!0,lazyLoad:!0,nav:!1,navSpeed:1200,items:1,margin:4,onChanged:function(event){var index=event.page.index>0?event.page.index:0;details.hide(),$(details.get(index)).show()}});detail_next.click(function(){Slideshow.trigger("next.owl.carousel",[1200])}),detail_prev.click(function(){Slideshow.trigger("prev.owl.carousel",[1200])})},Site.NewsCarousel=function($){{var dots,arrows,view=$(this),carousel=view.find(".owl-carousel"),curtain=view.find(".curtain"),onInitialized=function(){view.find(".owl-nav > DIV, .owl-dot, .owl-dot SPAN").one("click",function(){stopAutoplay()}),dots=view.find(".owl-dots"),arrows=view.find(".owl-nav"),Site.$Window.resize(positionElements).trigger("resize")},stopAutoplay=function(){carousel.trigger("stop.owl.autoplay")},positionElements=function(){var slide=view.find(".items .item:first .background");dots.css({top:slide.outerHeight()-40+"px",bottom:"auto"})};carousel.owlCarousel({onInitialized:onInitialized,onDragged:stopAutoplay,loop:!0,lazyLoad:!0,nav:!0,dots:!0,navSpeed:1200,dotsSpeed:1200,items:1,responsive:!0,margin:6,autoplay:!0,autoplayTimeout:8500,autoplayHoverPause:!1,autoplaySpeed:1200,onLoadedLazy:function(){setTimeout(function(){curtain.addClass("loaded").fadeOut(1600)},300)},navText:['<img src="/assets/img/arrow_prev.svg" />','<img src="/assets/img/arrow_next.svg" />']})}};var Site=Site||{};Site.DesktopNavigation=function($){{var primary_active,timer_level1,timer_level2,view=$(this),blocker=$("#blocker"),dropdown=view.find(".dropdown"),primary_items=view.find("NAV.primary A"),primary_dropdowns=dropdown.find("> DIV"),secondary_items=view.find(".tiered .group"),secondary_dropdowns=view.find(".tiered .group .sub"),current_path="/"+CURRENT_URI.substring(1).split("/")[0],is_brand=Site.$Body.hasClass("brand"),getMenuHeight=function(menu){return"groups"==menu.data("type")?193:("tiered"==menu.data("type"),60)},setPrimaryActive=function(){return"/"==current_path?!1:is_brand?!1:void primary_items.each(function(){$(this).is('[href^="'+current_path+'"]')&&($(this).addClass("active"),primary_active=$(this))})},openDropdown=function(e){if(e.preventDefault(),e.stopImmediatePropagation(),Site.Breakpoints.isTouch()&&1==$(this).data("open"))return void(document.location.href=$(this).attr("href"));if(cancelCloseDropdown(),1!=$(this).data("open")){blocker.is(":visible")||blocker.show().click(closeDropdownAction),primary_items.removeClass("active");var name=$(this).data("dropdown");if(!name.length)return!1;var menu=primary_dropdowns.filter("."+name),h=getMenuHeight(menu);return primary_items.removeClass("hover"),$(this).addClass("hover"),primary_items.data("open",!1),$(this).data("open",!0),dropdown.addClass("show").stop(!0,!0).animate({height:h},"easeOutQuad"),primary_dropdowns.not(menu).addClass("animating").stop(!0,!0).fadeOut(400,function(){$(this).removeClass("animating")}),menu.addClass("animating").stop(!0,!0).fadeIn(700,function(){$(this).removeClass("animating")}),!1}},closeDropdown=function(force){var timeout=force===!0?0:500;timer_level1=setTimeout(closeDropdownAction,timeout)},closeDropdownAction=function(force){blocker.hide().off(),primary_items.removeClass("hover"),primary_items.data("open",!1),primary_active&&primary_active.addClass("active"),dropdown.stop(!0,!0).animate({height:0},"easeOutQuad",function(){$(this).removeClass("show")}),primary_dropdowns.addClass("animating").stop(!0,!0).fadeOut(400,function(){$(this).removeClass("animating")})},cancelCloseDropdown=function(){clearTimeout(timer_level1)},openTier=function(){cancelCloseTier(),secondary_items.removeClass("hover"),secondary_dropdowns.stop(!0,!0).fadeOut(500),dropdown.stop(!0).animate({height:190},"easeOutQuad"),$(this).addClass("hover"),$(this).find(".sub").stop(!0,!0).fadeIn(600)},closeTier=function(){timer_level2=setTimeout(function(){secondary_items.removeClass("hover"),secondary_dropdowns.stop(!0,!0).fadeOut(500),dropdown.stop(!0,!0).animate({height:60},"easeOutQuad")},500)},cancelCloseTier=function(){clearTimeout(timer_level2)};!function(){setPrimaryActive(),primary_items.hover(openDropdown,closeDropdown),dropdown.hover(cancelCloseDropdown,closeDropdown),Site.Breakpoints.isTouch()&&(primary_items.off(),primary_items.on("click",openDropdown)),secondary_items.hover(openTier,closeTier),secondary_dropdowns.hover(cancelCloseTier,closeTier),Site.$Body.on("Navigation:Close",function(){closeDropdown(!0)})}()}},Site.MobileNavigation=function($){var win_scroll_before,view=$(this),triggers=$('[rel="mobilenav:trigger"]'),open=!1,blocker=$("#blocker"),header=$("HEADER.device"),$document=$(document),header_height=header.outerHeight(),header_class="hidden",scroll_buffer=65,section_title=header.find(".section_title"),current_path="/"+CURRENT_URI.substring(1).split("/")[0],headerHideShow=function(){{var doc_height=$document.height(),win_height=Site.$Window.height(),win_scroll=Site.$Window.scrollTop(),scroll_diff=win_scroll_before-win_scroll;parseInt(header.css("top"))+scroll_diff}scroll_buffer>=win_scroll?header.removeClass(header_class):scroll_diff>0?header.removeClass(header_class):0>scroll_diff&&(win_scroll+win_height>=doc_height-header_height?header.removeClass(header_class):header.addClass(header_class)),win_scroll_before=win_scroll},setPrimaryActive=function(){return"/"==current_path?!1:(view.find(".primary A").each(function(){return $(this).is('[href^="'+current_path+'"]')?($(this).addClass("active"),$(this)):void 0}),!1)},openNav=function(){open=!0,triggers.addClass("close"),Site.$HTML.addClass("modal_open nav_open"),view.addClass("open"),blocker.show().click(closeNav)},closeNav=function(){open=!1,triggers.removeClass("close"),Site.$HTML.removeClass("modal_open nav_open"),view.removeClass("open"),blocker.hide().off()};"undefined"!=typeof HEADER_TITLE&&(section_title.hide().html('<a href="'+HEADER_URL+'">'+HEADER_TITLE+"</a>"),setTimeout(function(){section_title.fadeIn(1e3)},500)),Site.$Window.scroll($.throttle(250,headerHideShow)),triggers.on("click",function(){return open?closeNav():openNav(),!1}),Site.$Body.on("PageLoader:playOut",function(){section_title.fadeOut(),closeNav()}),setPrimaryActive()};var Site=Site||{};Site.SearchDesktop=function($){var form=$(this),field=form.find(".text"),submit=form.find(".submit"),blocker=$("#blocker"),showBlocker=function(){blocker.show().click(clickBlocker)},hideBlocker=function(){blocker.hide().off("click")},clickBlocker=function(){field.blur()};submit.click(function(){form.submit()}),form.submit(function(){return field.val().length<1?!1:void 0}),field.focus(showBlocker),field.blur(hideBlocker)},Site.SearchDevice=function($){var timer,view=$(this),form=view.find("FORM"),field=view.find(".text"),icon=view.find(".icon"),blocker=$("#blocker"),getWidth=function(){return Site.Breakpoints.lte("mobile")?Site.$Window.width()-70:190},open=function(){return timer&&clearTimeout(timer),view.hasClass("open")?(field.val().length>1?form.submit():close(),!1):(view.addClass("open"),field.show().animate({width:getWidth(),opacity:1},400,function(){$(this).focus()}),void blocker.show().click(close))},doBlur=function(){timer=setTimeout(close,500)},close=function(){view.removeClass("open"),field.animate({width:0,opacity:0},400,function(){$(this).hide()}),blocker.hide().off("click")},submitForm=function(){return field.val().length>1?!0:(close(),!1)};icon.click(open),field.blur(doBlur),form.submit(submitForm)};var Site=Site||{};Site.IdeasPublicationsPage=function($){var view=$(this);view.find(".item").matchHeight()},Site.SlideshowGalleryDevice=function($){var gallery,view=$(this),trigger=view.find(".trigger"),pswp_element=document.querySelectorAll(".pswp")[0],getImageSize=function(index,item){if(item.w<1||item.h<1){var img=new Image;img.onload=function(){item.w=this.width,item.h=this.height,gallery.invalidateCurrItems(),gallery.updateSize(!0)},img.src=item.src}},show=function(){var options={index:0,history:!1,fullscreenEl:!1,zoomEl:!1,shareEl:!1,counterEl:!1,tapToToggleControls:!0,addCaptionHTMLFn:function(item,captionEl,isFake){var caption_element=$(captionEl),caption='<div class="top"><div class="project">'+item.title+'</div></div><div class="position">'+item.position+'</div><div class="slideshow"><div class="inner"><h6>'+item.slide_title+"</h6>"+$("<span />",{html:item.slide_description}).text()+'</div></div><div class="toggle" data-alt="LESS">MORE</div>';return captionEl.children[0].innerHTML=caption,caption_element.hasClass("expanded")&&(caption_element.find(".toggle").text("LESS"),caption_element.find(".slideshow").css({maxHeight:"none"})),!0}};return gallery=new PhotoSwipe(pswp_element,PhotoSwipeUI_Default,ProjectGalleryDevice_data,options),gallery.listen("gettingData",getImageSize),gallery.init(),!1};trigger.click(show)};var Site=Site||{};Site.Layout=function($){$("[data-original]").lazyload({threshold:300,effect:"fadeIn"}),Site.$Body.on("contextmenu","img",function(){var c=confirm("For image use requests, please send a message to SOM through the Contact Us page.");return c&&(document.location.href="/about/contact_us"),!1}),$("A[href$='.pdf']").attr("target","_blank").click(function(e){ga("send","event","Download","PDF",$(this).attr("href"))})},Site.TranslateWidget=function($){var google_js="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit",custom_translate_box=$(this),lang_container=custom_translate_box.find("UL"),languages=custom_translate_box.find("A"),title=custom_translate_box.find(".title"),isOpen=!1;window.googleTranslateElementInit=function(){new google.translate.TranslateElement({pageLanguage:"en",layout:google.translate.TranslateElement.InlineLayout.SIMPLE,autoDisplay:!1},"google_translate_element")},$.getScript(google_js,function(){title.on("click",function(e){isOpen?lang_container.hide():lang_container.show(),isOpen=!isOpen}),languages.on("click",function(e){var lang=$(this).data("lang"),$frame=$(".goog-te-menu-frame:first");if("English"===lang)return $frame.contents().find(".goog-te-menu2-item span.text:contains("+lang+")").get(0).click(),document.location=document.location.href,!1;if(!$frame.size())return!1;var span=$(".goog-te-menu-frame:first").contents().find("SPAN.text").filter(function(){return $(this).text()===lang});return span.get(0).click(),!1})})},Site.FilterBar=function($){var view=$(this);view.find("SELECT").change(function(){$(this).find(":selected");return document.location.href=$(this).val(),!1})},Site.ReadMore=function($){{var height_less,view=$(this),trigger=view.find(".trigger"),area=view.find(".container"),open=!1,text_more=trigger.text(),text_less=trigger.data("alt"),showMore=function(){return height_less=area.height(),area.stop(!0),area.height(height_less).css({maxHeight:"none"}),area.animate({height:area[0].scrollHeight},1200,"easeOutCubic",function(){area.height("auto")}),view.addClass("show"),trigger.html(text_less),open=!0,!1},showLess=function(){return area.stop(!0).animate({height:height_less},1200,"easeOutCubic",function(){area.height("auto").css({maxHeight:height_less})}),view.removeClass("show"),trigger.html(text_more),open=!1,!1};!function(){return area[0].scrollHeight<=area.height()?(trigger.hide(),!1):void trigger.on("click",function(e){return open?showLess():showMore()})}()}},Site.CreditsTooltip=function($){var timer,view=$(this),window=view.find(".window"),show=function(){timer&&clearTimeout(timer),view.addClass("open")},hide=function(){timer=setTimeout(function(){view.removeClass("open")},300)};view.hover(show,hide),window.hover(show,hide)},Site.NewsLanding=function(){var section=$(this);section.jscroll({loadingHtml:'<div class="loading"><div class="spinner"></div></div>',padding:50,nextSelector:"A.next:last"})};var Site=Site||{};Site.Modal=function($){{var HTML_BODY=$("HTML"),overlay=$("#modal_overlay"),content=$("#modal_content"),target=content.find(".target"),open=!1,History=window.History,mode=History.enabled?"history":"hash",base_title=document.getElementsByTagName("title")[0].innerHTML,base_url=window.location.pathname,stateChange=function(){var State=History.getState();"load"==State.data.action?loadAction(State.url):"close"==State.data.action?closeAction():closeClick()},loadClick=function(e){if("history"==mode){e.preventDefault();var url=$(this).attr("href"),title=$(this).attr("title")||"";History.pushState({data:title,action:"load"},title,url)}else loadAction($(this).attr("href"))},loadAction=function(url){HTML_BODY.addClass("modal_open"),overlay.fadeIn().addClass("loading"),open&&content.stop(!0).fadeOut();var timeout=open?500:0;setTimeout(function(){target.load(url+"?ajax=1",loadComplete)},timeout),open=!0},loadComplete=function(){content.scrollTop(0),content.fadeIn(),overlay.removeClass("loading"),Site.Init(target),target.find("[data-original]").lazyload({skip_invisible:!1,threshold:300,effect:"fadeIn"})},closeClick=function(e){return e&&e.preventDefault(),open?void("history"==mode?History.replaceState({action:"close"},base_title,base_url):closeAction()):!1},closeAction=function(){overlay.fadeOut(),content.stop(!0).fadeOut(function(){target.html("")}),HTML_BODY.removeClass("modal_open"),open=!1},onKey=function(e){open&&27==e.keyCode&&closeClick()};!function(){"history"==mode&&History.Adapter.bind(window,"statechange",stateChange),Site.$Body.on("click",'A[rel="modal:load"]',loadClick),Site.$Body.on("click",'A[rel="modal:close"]',closeClick),$(document).keyup(onKey)}()}},Site.Modal_Original=function($){{var overlay=$("#modal_overlay"),content=$("#modal_content"),target=content.find(".target"),HTML_BODY=$("HTML"),openLoad=function(e){return e.preventDefault(),HTML_BODY.addClass("modal_open"),overlay.fadeIn().addClass("loading"),target.load($(this).attr("href")+"?ajax=1",openLoad_complete),!1},openLoad_complete=function(e){content.scrollTop(0),content.fadeIn(),overlay.removeClass("loading"),target.find("[data-script]").each(function(){var that=this,classes=$(this).data("script").split(" ");$.each(classes,function(i,v){Site.Invoke(that,v)})}),target.find("[data-original]").lazyload({skip_invisible:!1,threshold:300,effect:"fadeIn"})},close=function(e){return overlay.fadeOut(),content.stop(!0).fadeOut(function(){target.html("")}),HTML_BODY.removeClass("modal_open"),!1},onKey=function(e){27==e.keyCode&&close()};!function(){Site.$Body.on("click",'A[rel="modal:load"]',openLoad),Site.$Body.on("click",'A[rel="modal:close"]',close),$(document).keyup(onKey)}()}};var Site=Site||{};Site.PageLoader=function($){{var cover=this,spinner=$(cover).find(".spinner"),HTML=($(window),$("HTML")),site_url="http://"+top.location.host.toString(),clickExitLink=function(event){var link=$(this);if("_blank"==link.attr("target"))return!0;if(link.is('[rel^="modal:"]'))return!0;if("#"==link.attr("href"))return!0;event.preventDefault();var target=link.attr("href"),target_parts=target.split("#"),target_path=target_parts[0],target_hash=target_parts[1],current_path=window.location.href.split("#")[0];return site_url+target_path==current_path?(Site.$Body.trigger("PageLoader:playOut"),target_hash&&target_hash.length>1?document.location.href=target:playOut(target,link)):playOut(target,link),!1},playOut=function(target,link){Site.$Body.trigger("PageLoader:playOut"),Site.$Body.addClass("pageloader_playout"),Site.Breakpoints.isSafari()?document.location=target:(spinner.show(),cover.addClass("loading").fadeIn(300,function(){HTML.addClass("modal_open"),document.location=target}))},playIn=function(){HTML.addClass("modal_open"),setTimeout(function(){spinner.hide(),cover.fadeOut(400,function(){HTML.removeClass("modal_open"),cover.attr("class","")})},300)};!function(){window.onunload=function(){},$("a[href^='"+site_url+"'], a[href^='/'], a[href^='./'], a[href^='../']").on("vclick",clickExitLink),playIn()}()}};var Site=Site||{};Site.ProjectSearch=function($){{var header_stuck,view=$(this),loading=!1,loader={add:function(){view.prepend('<div id="loading"><div class="spinner"></div></div>')},show:function(callback){loader.add(),loading=view.find("#loading"),$(window).scrollTop(0),loading.stop(!0,!1).fadeIn("fast",function(){callback&&callback()})},hide:function(callback){loading.delay(1e3).fadeOut("fast",function(){callback&&callback()})}},hash={set:function(params){var parts=[];params.mode&&params.mode.length&&parts.push("mode="+params.mode),params.sort&&params.sort.length&&parts.push("sort="+params.sort),params.attribute.region&&params.attribute.region.length&&parts.push("region="+params.attribute.region),params.attribute.markets&&params.attribute.markets.length&&parts.push("markets="+params.attribute.markets),params.attribute["sub-markets"]&&params.attribute["sub-markets"].length&&parts.push("sub-markets="+params.attribute["sub-markets"]),params.attribute.service&&params.attribute.service.length&&parts.push("service="+params.attribute.service),parts.length&&(window.location.hash=parts.join("&"))},load:function(event,incoming_params){var incoming_params=incoming_params||{},search_params=$.extend(getSearchParams(),incoming_params);""==search_params.mode&&delete search_params.mode,""==search_params.sort&&delete search_params.sort,(""==search_params.attribute.region||"null"==search_params.attribute.region)&&delete search_params.attribute.region,(""==search_params.attribute.markets||"null"==search_params.attribute.markets)&&delete search_params.attribute.markets,(""==search_params.attribute["sub-markets"]||"null"==search_params.attribute["sub-markets"])&&delete search_params.attribute["sub-markets"],(""==search_params.attribute.service||"null"==search_params.attribute.service)&&delete search_params.attribute.service,search_params.attribute||delete search_params.attribute,hash.set(search_params)},change:function(){var hashes=window.location.hash.slice(1).split("&"),params={attribute:{}},action=!1;if(hashes.length>0)for(var i=0;i<hashes.length;i++){var hash=hashes[i],key=hash.split("=")[0],value=hash.split("=")[1];value&&value.length&&("region"===key||"markets"===key||"service"===key||"sub-markets"===key?(params.attribute[key]=value,action=!0):(params[key]=value,action=!0))}action&&search["do"](params)}},track={query:function(params){if("undefined"==typeof params.attribute)return!1;var query_full="";"undefined"!=typeof params.attribute.markets&&(this.send("Query-Markets",params.attribute.markets),query_full+=" / "+params.attribute.markets),"undefined"!=typeof params.attribute.region&&(this.send("Query-Region",params.attribute.region),query_full+=" / "+params.attribute.region),"undefined"!=typeof params.attribute.service&&(this.send("Query-Service",params.attribute.service),query_full+=" / "+params.attribute.service),this.send("Query",query_full)},action:function(label,value){this.send(label,value)},send:function(label,value){return"function"!=typeof ga?!1:(ga("send","event","Project Search",label,value),void c("Track Action ["+label+"] "+value))}},search={"do":function(search_params){track.query(search_params),view.css({height:view.height()}),loader.show(function(){$.ajax(getSearchPath(),{data:search_params,type:"GET",dataType:"html",success:search.complete})})},complete:function(response){setTimeout(function(){view.html(response).height("auto"),view.find("IMG.lazy").lazyload({effect:"fadeIn",event:"load"}),initGrid()},200)}},changeMode=function(event){return track.action("Mode",$(this).data("mode")),hash.load(!1,{mode:$(this).data("mode")}),!1},changeSort=function(event){var value="change"==event.type?$(this).val():$(this).data("sort");return track.action("Sort",value),hash.load(!1,{sort:value}),!1},toggleFilters=function(){var link=$(this),filters=view.find(".projects_search");return link.hasClass("open")?(link.removeClass("open"),filters.slideUp()):(link.addClass("open"),filters.slideDown()),!1},getSearchPath=function(){return SITEPATH.substring(0,SITEPATH.length-1)+CURRENT_URI+"?ajax=1"},getSearchParams=function(){return{view:view.find("A[data-view].selected").data("view"),mode:view.find("A[data-mode].selected").data("mode"),sort:view.find("A[data-sort].selected").data("sort"),attribute:{region:view.find("select.region").val(),"sub-markets":view.find("input.sub-markets").val(),markets:view.find("select.markets").val(),service:view.find("select.service").val()}}},initGrid=function(){header_stuck=!1};!function(){view.find("A.mode IMG").each(Site.Utils.replaceSVG),view.on("click","A[data-sort]",changeSort),view.on("click","A[data-mode]",changeMode),view.on("click",'A[data-toggle="filters"]',toggleFilters),view.on("change","SELECT.filterdropdown",hash.load),view.on("change","SELECT.sortdropdown",changeSort),window.location.hash.length>2&&hash.change(),Site.$Window.on("hashchange",hash.change),initGrid()}()}};var Site=Site||{};Site.ProjectGalleryDesktop=function($){{var timer,current_gallery,view=$(this),presentation_mode=!0,arrows=(view.find(".owl-carousel"),view.find("> .owl-nav")),tab_navs=view.find(".tabs_nav A"),tab_panels=view.find(".tab"),timer_delay=4500,current_tab=0,current_specs={index:void 0,count:void 0},getTabPreloadImages=function(target){var images=[];return target.find("DIV[data-src!='']").each(function(){var image=$(this).attr("data-src");image&&(images.push(image),$(this).css("background-image","url("+image+")").attr("data-src",""))}),images},tabBefore=function(event,$clicked,$targetPanel){1==$targetPanel.data("gallery")?$targetPanel.find(".gallery").trigger("to.owl.carousel",[0,0]):arrows.show()},tabEnter=function(event,$clicked,$targetPanel){presentation.stop(),current_tab=$targetPanel.index()-1,current_specs={index:void 0,count:void 0},current_gallery=$targetPanel.find(".gallery"),1!=$targetPanel.data("gallery")&&(view.addClass("first_slide"),new imagesLoaded(getTabPreloadImages($targetPanel),function(){$targetPanel.hasClass("video_tab")||presentation.start(),$targetPanel.data("gallery",!0);var scroll=Site.$Window.scrollTop();current_gallery.owlCarousel({loop:!1,lazyLoad:!0,dots:!0,nav:!1,navSpeed:1200,items:1,video:!0,thumbs:!0,thumbsPrerendered:!0,onInitialized:function(event){Site.$Window.scrollTop(scroll),current_specs=event.item,setTimeout(function(){$targetPanel.find(".loading").fadeOut(600),arrows.show()},2e3),current_gallery.find(".owl-dot").one("click",function(){presentation.stop()})},onStopVideo:function(){},onPlayVideo:function(){},onDragged:function(event){presentation.stop()},onChanged:function(event){current_specs=event.item,current_specs.index&&current_specs.index>0?view.removeClass("first_slide"):view.addClass("first_slide")}})}))},refreshTab=function(num){var loading=$(tab_panels[current_tab]).find(".loading");loading.fadeIn(600,function(){current_gallery.trigger("to.owl.carousel",[0,10]),setTimeout(function(){loading.fadeOut(600)},20)})},goTab=function(num){var go=num<tab_navs.length?num:0,name=$(tab_navs[go]).attr("href");view.easytabs("select",name)},showPrevClick=function(e){presentation.stop(),showPrev()},showPrev=function(e){return void 0==current_specs.index||0==current_specs.index?goTab(current_tab-1):current_gallery.trigger("prev.owl.carousel",[1200]),!1},showNextClick=function(e){presentation.stop(),showNext()},showNext=function(e){return void 0==current_specs.index||current_specs.index<current_specs.count-1?current_gallery.trigger("next.owl.carousel",[1200]):1==tab_navs.length?refreshTab(current_tab):goTab(current_tab+1),!1},presentation={start:function(){presentation_mode=!0,timer&&clearInterval(timer),timer=setInterval(showNext,timer_delay)},stop:function(){presentation_mode=!1,timer&&clearInterval(timer)}};!function(){arrows.hide(),view.easytabs({updateHash:!1}).bind("easytabs:after",tabEnter).bind("easytabs:before",tabBefore),tabEnter(!1,!1,tab_panels.first()),arrows.find(".owl-prev").click(showPrevClick),arrows.find(".owl-next").click(showNextClick)}()}},Site.ProjectGalleryDevice=function($){var gallery,view=$(this),trigger=view.find(".preview IMG"),navs=view.find('.nav A[data-type="image"]'),pswp_element=document.querySelectorAll(".pswp")[0],navClick=function(){var name=$(this).data("name");return $.each(ProjectGalleryDevice_data,function(i,value){return name==value.type?(show(!1,i),!1):void 0}),!1},refresh=function(){$(pswp_element).hasClass("pswp--open")&&setTimeout(function(){pswp_element.getBoundingClientRect().width==window.innerWidth?window.requestAnimationFrame(function(){gallery&&(gallery.invalidateCurrItems(),gallery.updateSize(!0))}):refresh()},100)},show=function(event,index){var index=index||0,options={index:index,history:!1,fullscreenEl:!1,zoomEl:!1,shareEl:!1,counterEl:!1,tapToToggleControls:!0,addCaptionHTMLFn:function(item,captionEl,isFake){var caption='<div class="top"><div class="project">'+item.project+'</div><div class="type"><span>'+item.position+"</span>"+item.type+'</div></div><div class="caption">'+item.title+"</div>";

return captionEl.children[0].innerHTML=caption,!0}};gallery=new PhotoSwipe(pswp_element,PhotoSwipeUI_Default,ProjectGalleryDevice_data,options),gallery.init()};navs.click(navClick),trigger.click(show),window.addEventListener("orientationchange",function(){/iP(hone|od|ad)/.test(navigator.platform)&&refresh()})},Site.ProjectVideoDevice=function($){var view=$(this),triggers=$('A[rel="ProjectVideoDevice:show"]'),slides=view.find(".slide"),frames=view.find(".frame"),slide_count=slides.length,slide_current=1,goPrev=function(){var num=1==slide_current?slide_count:slide_current-1;return go(num),!1},goNext=function(){var num=slide_current==slide_count?1:slide_current+1;return go(num),!1},go=function(num){slide_current=num,slides.hide(),frames.html(" ");var new_slide=slides.filter('[num="'+num+'"]'),new_frame=new_slide.find(".frame");new_frame.html('<iframe src="'+new_frame.data("src")+'" width="640" height="360" frameborder="0" webkitallowfullscreen="webkitallowfullscreen" mozallowfullscreen="mozallowfullscreen" allowfullscreen="allowfullscreen"> </iframe>'),new_slide.show()},show=function(){return go(1),view.show(),!1},hide=function(){return view.hide(),slides.hide(),frames.html(" "),!1};triggers.click(show),slide_count>1?(view.find(".arrow.left").click(goPrev),view.find(".arrow.right").click(goNext)):view.find(".arrow").hide(),view.find(".close").click(hide)};var Site=Site||{};Site.Promos=function($){var view=$(this),more=view.find(".more"),trigger=view.find(".trigger"),links=view.find(".slide A");view.find("IMG.lazy").lazyload({skip_invisible:!1,threshold:300,effect:"fadeIn"}),links.click(function(){return Site.Breakpoints.isTouch()?$(this).data("open")?!0:($(this).data("open",!0).addClass("hover"),!1):!0}),trigger.click(function(){var autoHeight=more.css("height","auto").height();return more.height(0),more.animate({height:autoHeight},1400),trigger.css({opacity:0}),!1})};var Site=Site||{};Site.ReleatedThumbs=function($){{var view=$(this);!function(){view.find(".item").matchHeight()}()}},Site.ResponsiveIframes=function($){var view=$(this),frames=view.find("IFRAME"),max_width=680;frames.each(function(){var frame=$(this),w=frame.width(),h=frame.height(),r=h/w;frame.data("ratio",r).removeAttr("width").removeAttr("height")}),Site.$Window.resize(function(){frames.each(function(){var width=$(this).parent().width();width>max_width&&(width=max_width);var height=Math.floor(width*$(this).data("ratio"))-1;$(this).width(width).height(height)})}).trigger("resize")};var Site=Site||{};Site.ShareToggle=function($){var timer,view=$(this),show=function(){timer&&clearTimeout(timer),view.addClass("over")},hide=function(){timer=setTimeout(function(){view.removeClass("over")},250)};view.hover(show,hide)},Site.ShareWidget=function($){var section=$(this),share_paths={facebook:"https://www.facebook.com/sharer/sharer.php?u={{path}}&t={{title}}",twitter:"https://twitter.com/intent/tweet?text={{title}}&url={{path}}",tumblr:"http://www.tumblr.com/share?v=3&u={{path}}&t={{title}}&s=",weibo:"http://service.weibo.com/share/share.php?url={{path}}&appkey=&title={{title}}"},data={title:document.title,url:document.location.href},buttonClick=function(e){var button=$(this);return button.hasClass("facebook")?(shareService("facebook"),!1):button.hasClass("twitter")?(shareService("twitter"),!1):button.hasClass("tumblr")?(shareService("tumblr"),!1):button.hasClass("weibo")?(shareService("weibo"),!1):button.hasClass("pintrest")?(sharePintrest(),!1):button.hasClass("print")?(sharePrint(),!1):button.hasClass("email")?(shareEmail(),!1):!0},sharePrint=function(){"undefined"!=typeof _gaq&&_gaq.push(["_trackSocial","print","print"]),window.print()},shareService=function(service){var url=share_paths[service];return"undefined"!=typeof _gaq&&_gaq.push(["_trackSocial",service,"share"]),void 0==url?!1:(url=url.replace("{{title}}",encode(data.title)),url=url.replace("{{path}}",encode(data.url)),void window.open(url,"_blank"))},shareEmail=function(){"undefined"!=typeof _gaq&&_gaq.push(["_trackSocial","email","share"]);var subject=data.title,body=encodeURIComponent(data.url),url="mailto:?subject="+subject+"&body="+body;document.location.href=url},sharePintrest=function(){"undefined"!=typeof _gaq&&_gaq.push(["_trackSocial","pintrest","share"]),void function(d){var e=d.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","UTF-8"),e.setAttribute("src","//assets.pinterest.com/js/pinmarklet.js?r="+99999999*Math.random()),d.body.appendChild(e)}(document)},encode=function(str){return encodeURIComponent(str.replace(/&amp;/g,"&"))},prepTitle=function(title){return title.replace("SOM: ","")},init=function(){section.data("share_title")&&(data.title=section.data("share_title")),section.data("share_url")&&(data.url=section.data("share_url")),section.data("share_email_subject")&&(data.email_subject=section.data("share_email_subject")),section.data("share_email_message")&&(data.email_message=section.data("share_email_message")),data.title=prepTitle(data.title),section.find("A").click(buttonClick),section.find(".trigger").click(function(){section.toggleClass("show")})};init()};var Site=Site||{};Site.SiteSearchNew=function($){{var field,submit,view=$(this),button=view.find(".submit"),doSubmit=function(){field.val().length&&submit.click()};!function(){button.click(doSubmit),setTimeout(function(){field=view.find("INPUT.gsc-input"),form=view.find("FORM"),submit=view.find(".gsc-search-button"),field.attr("placeholder","Search on SOM.com")},400)}()}};var Site=Site||{};Site.CookieJar=new function(){this.write=function(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"},this.read=function(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},this.erase=function(name){CookieJar.write(name,"",-1)}},Site.Utils=new function(){this.replaceSVG=function(){var $img=jQuery(this),imgID=$img.attr("id"),imgClass=$img.attr("class"),imgURL=$img.attr("src");jQuery.get(imgURL,function(data){var $svg=jQuery(data).find("svg");"undefined"!=typeof imgID&&($svg=$svg.attr("id",imgID)),"undefined"!=typeof imgClass&&($svg=$svg.attr("class",imgClass+" replaced-svg")),$svg=$svg.removeAttr("xmlns:a"),$img.replaceWith($svg)},"xml")},this.getQueryParam=function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))},this.decodeHtmlEntity=function(str){return str.replace(/&#(\d+);/g,function(match,dec){return String.fromCharCode(dec)})},this.encodeHtmlEntity=function(str){for(var buf=[],i=str.length-1;i>=0;i--)buf.unshift(["&#",str[i].charCodeAt(),";"].join(""));return buf.join("")}};var Site=Site||{};Site.Prefs=new function(){this.debug=!0},Site.Debug=function(message){return"object"!=typeof console?!1:Site.Prefs.debug!==!0?!1:void console.log(message)},Site.Invoke=function(element,command){command.length&&Site.hasOwnProperty(command)&&Site[command].call($(element),jQuery)},Site.Init=function(element){var $=jQuery,element=element||Site.$HTML;element.find("[data-script]").each(function(){var that=this,classes=$(this).data("script").split(" ");$.each(classes,function(i,v){Site.Invoke(that,v)})})},Site.Bootstrap=function(){var instantiated=!1,go=function(){instantiated||($=jQuery,instantiated=!0,window.c=Site.Debug,Site.$Body=$("BODY"),Site.$HTML=$("HTML"),Site.$Window=$(window),Site.$Body.removeClass("disable_transition"),Site.Breakpoints.init(),Site.Init())};history.navigationMode="compatible",jQuery(document).ready(go)}();